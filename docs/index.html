<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì•„ì‚°ì‹œ ê°•ì†Œí˜• ìŠ¤ë§ˆíŠ¸ì‹œí‹° êµ¬ì¶•ì‚¬ì—… ëŒ€ì‹œë³´ë“œ</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #1e40af;
            --success: #059669;
            --warning: #d97706;
            --danger: #dc2626;
            --bg-dark: #0f172a;
            --bg-card: #1e293b;
        }
        body {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            min-height: 100vh;
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
        }
        .card {
            background: rgba(30, 41, 59, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
        }
        .stat-card {
            background: linear-gradient(135deg, rgba(30, 64, 175, 0.3) 0%, rgba(30, 41, 59, 0.8) 100%);
        }
        .progress-bar {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 9999px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            border-radius: 9999px;
            transition: width 1s ease-in-out;
        }
        .status-badge {
            padding: 4px 12px;
            border-radius: 9999px;
            font-size: 12px;
            font-weight: 600;
        }
        .animate-pulse-slow {
            animation: pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        .d-day-counter {
            font-size: 4rem;
            font-weight: 800;
            background: linear-gradient(135deg, #f59e0b 0%, #ef4444 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 400px;
        }
        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-left-color: #3b82f6;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="text-white">
    <!-- ë¡œë”© í™”ë©´ -->
    <div id="loading" class="loading">
        <div class="text-center">
            <div class="spinner mx-auto mb-4"></div>
            <p class="text-gray-400">ë°ì´í„° ë¡œë”© ì¤‘...</p>
        </div>
    </div>

    <!-- ë©”ì¸ ëŒ€ì‹œë³´ë“œ -->
    <div id="dashboard" class="hidden">
        <!-- í—¤ë” -->
        <header class="bg-gradient-to-r from-blue-900 to-indigo-900 py-6 px-4 border-b border-blue-800">
            <div class="max-w-7xl mx-auto">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4">
                    <div>
                        <div class="flex items-center gap-2 mb-2">
                            <span class="text-3xl">ğŸ™ï¸</span>
                            <h1 class="text-2xl md:text-3xl font-bold" id="project-name">ì•„ì‚°ì‹œ ê°•ì†Œí˜• ìŠ¤ë§ˆíŠ¸ì‹œí‹° êµ¬ì¶•ì‚¬ì—…</h1>
                        </div>
                        <p class="text-blue-200" id="project-subtitle">ë””ì§€í„¸ OASIS êµ¬í˜„ì„ í†µí•œ ì§€ì—­ê²½ì œ í™œì„±í™”</p>
                    </div>
                    <div class="text-right">
                        <p class="text-sm text-blue-300">ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸</p>
                        <p class="text-lg font-semibold" id="last-updated">-</p>
                    </div>
                </div>
            </div>
        </header>

        <main class="max-w-7xl mx-auto px-4 py-8">
            <!-- D-Day & í•µì‹¬ ì§€í‘œ -->
            <section class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                <!-- D-Day ì¹´ìš´í„° -->
                <div class="card p-6 text-center col-span-1">
                    <p class="text-gray-400 mb-2">ì‚¬ì—… ì¢…ë£Œê¹Œì§€</p>
                    <div class="d-day-counter animate-pulse-slow" id="d-day">D-0</div>
                    <p class="text-gray-400 mt-2" id="end-date">2025.12.31</p>
                </div>

                <!-- ì „ì²´ ì§„í–‰ë¥  -->
                <div class="stat-card card p-6">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="text-3xl">ğŸ“ˆ</span>
                        <div>
                            <p class="text-gray-400 text-sm">ì „ì²´ ì§„í–‰ë¥ </p>
                            <p class="text-3xl font-bold" id="overall-progress">0%</p>
                        </div>
                    </div>
                    <div class="progress-bar h-3">
                        <div class="progress-fill bg-blue-500" id="progress-bar" style="width: 0%"></div>
                    </div>
                </div>

                <!-- ì˜ˆì‚° ì§‘í–‰ë¥  -->
                <div class="stat-card card p-6">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="text-3xl">ğŸ’°</span>
                        <div>
                            <p class="text-gray-400 text-sm">ì˜ˆì‚° ì§‘í–‰ë¥ </p>
                            <p class="text-3xl font-bold" id="budget-rate">0%</p>
                        </div>
                    </div>
                    <div class="progress-bar h-3">
                        <div class="progress-fill bg-green-500" id="budget-bar" style="width: 0%"></div>
                    </div>
                </div>

                <!-- ë¦¬ìŠ¤í¬ í˜„í™© -->
                <div class="stat-card card p-6">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="text-3xl">âš ï¸</span>
                        <div>
                            <p class="text-gray-400 text-sm">ê¸´ê¸‰ ë¦¬ìŠ¤í¬</p>
                            <p class="text-3xl font-bold text-red-400" id="risk-count">0ê±´</p>
                        </div>
                    </div>
                    <p class="text-sm text-gray-400" id="status-message">-</p>
                </div>
            </section>

            <!-- ì˜ˆì‚° í˜„í™© ìƒì„¸ -->
            <section class="card p-6 mb-8">
                <h2 class="text-xl font-bold mb-6 flex items-center gap-2">
                    <span>ğŸ’µ</span> ì˜ˆì‚° ì§‘í–‰ í˜„í™©
                </h2>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
                    <div class="text-center">
                        <p class="text-gray-400 text-sm">ì´ ì‚¬ì—…ë¹„</p>
                        <p class="text-2xl font-bold text-white" id="total-budget">0ì–µì›</p>
                    </div>
                    <div class="text-center">
                        <p class="text-gray-400 text-sm">ë°°ì •ì˜ˆì‚°</p>
                        <p class="text-2xl font-bold text-blue-400" id="allocated-budget">0ì–µì›</p>
                    </div>
                    <div class="text-center">
                        <p class="text-gray-400 text-sm">ì§‘í–‰ê¸ˆì•¡</p>
                        <p class="text-2xl font-bold text-green-400" id="executed-budget">0ì–µì›</p>
                    </div>
                    <div class="text-center">
                        <p class="text-gray-400 text-sm">ì”ì•¡</p>
                        <p class="text-2xl font-bold text-yellow-400" id="remaining-budget">0ì–µì›</p>
                    </div>
                </div>
            </section>

            <!-- ë‹¨ìœ„ì‚¬ì—…ë³„ í˜„í™© -->
            <section class="card p-6 mb-8">
                <h2 class="text-xl font-bold mb-6 flex items-center gap-2">
                    <span>ğŸ“Š</span> ë‹¨ìœ„ì‚¬ì—…ë³„ ì§„í–‰ í˜„í™©
                </h2>
                <div class="space-y-4" id="projects-container">
                    <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
                </div>
            </section>

            <!-- ì¼ì • & ë¦¬ìŠ¤í¬ -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
                <!-- ì£¼ìš” ì¼ì • -->
                <section class="card p-6">
                    <h2 class="text-xl font-bold mb-6 flex items-center gap-2">
                        <span>ğŸ“…</span> ì£¼ìš” ì¼ì •
                    </h2>
                    <div class="space-y-3" id="timeline-container">
                        <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
                    </div>
                </section>

                <!-- ë¦¬ìŠ¤í¬ í˜„í™© -->
                <section class="card p-6">
                    <h2 class="text-xl font-bold mb-6 flex items-center gap-2">
                        <span>âš ï¸</span> ë¦¬ìŠ¤í¬ í˜„í™©
                    </h2>
                    <div class="grid grid-cols-4 gap-4 mb-6" id="risk-summary">
                        <div class="text-center">
                            <p class="text-3xl font-bold text-red-500" id="risk-critical">0</p>
                            <p class="text-xs text-gray-400">ê¸´ê¸‰</p>
                        </div>
                        <div class="text-center">
                            <p class="text-3xl font-bold text-orange-500" id="risk-high">0</p>
                            <p class="text-xs text-gray-400">ë†’ìŒ</p>
                        </div>
                        <div class="text-center">
                            <p class="text-3xl font-bold text-yellow-500" id="risk-medium">0</p>
                            <p class="text-xs text-gray-400">ì£¼ì˜</p>
                        </div>
                        <div class="text-center">
                            <p class="text-3xl font-bold text-green-500" id="risk-low">0</p>
                            <p class="text-xs text-gray-400">ë‚®ìŒ</p>
                        </div>
                    </div>
                    <div class="space-y-3" id="risk-items">
                        <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
                    </div>
                </section>
            </div>

            <!-- ìµœê·¼ ë³€ê²½ì‚¬í•­ -->
            <section class="card p-6 mb-8" id="changes-section">
                <h2 class="text-xl font-bold mb-4 flex items-center gap-2">
                    <span>ğŸ“</span> ìµœê·¼ ë³€ê²½ì‚¬í•­
                </h2>
                <div class="bg-blue-900/30 rounded-lg p-4 border border-blue-800">
                    <div class="flex justify-between items-start mb-3">
                        <div>
                            <span class="status-badge bg-green-600 text-white" id="change-status">ì™„ë£Œ</span>
                            <span class="ml-2 text-gray-400 text-sm" id="change-date">-</span>
                        </div>
                    </div>
                    <h3 class="text-lg font-semibold mb-2" id="change-title">-</h3>
                    <ul class="space-y-1 text-gray-300" id="change-items">
                        <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
                    </ul>
                </div>
            </section>
        </main>

        <!-- í‘¸í„° -->
        <footer class="bg-gray-900 py-6 px-4 border-t border-gray-800">
            <div class="max-w-7xl mx-auto text-center">
                <p class="text-gray-400 text-sm">
                    ğŸ“Š ë°ì´í„° ì†ŒìŠ¤: 
                    <a href="#" id="notion-link" class="text-blue-400 hover:underline">Notion</a> | 
                    <a href="#" id="github-link" class="text-blue-400 hover:underline">GitHub</a>
                </p>
                <p class="text-gray-500 text-xs mt-2">
                    Â© 2025 ì œì¼ì—”ì§€ë‹ˆì–´ë§ PMOíŒ€ | ìë™ ì—…ë°ì´íŠ¸: ë§¤ì¼ 09:00 KST
                </p>
            </div>
        </footer>
    </div>

    <script>
        // ê¸ˆì•¡ í¬ë§·íŒ…
        function formatBudget(amount) {
            if (amount >= 100000000) {
                return (amount / 100000000).toFixed(1) + 'ì–µì›';
            } else if (amount >= 10000) {
                return (amount / 10000).toFixed(0) + 'ë§Œì›';
            }
            return amount.toLocaleString() + 'ì›';
        }

        // ìƒíƒœì— ë”°ë¥¸ ìƒ‰ìƒ
        function getStatusColor(status) {
            if (status.includes('ì™„ë£Œ') || status.includes('ê³„ì•½')) return 'bg-green-600';
            if (status.includes('ì§„í–‰') || status.includes('ê°œë°œ')) return 'bg-blue-600';
            if (status.includes('ì„ ì •') || status.includes('ë³€ê²½')) return 'bg-yellow-600';
            return 'bg-gray-600';
        }

        // ëŒ€ì‹œë³´ë“œ ë Œë”ë§
        function renderDashboard(data) {
            // í”„ë¡œì íŠ¸ ì •ë³´
            document.getElementById('project-name').textContent = data.project?.name || 'ì•„ì‚°ì‹œ ê°•ì†Œí˜• ìŠ¤ë§ˆíŠ¸ì‹œí‹° êµ¬ì¶•ì‚¬ì—…';
            document.getElementById('project-subtitle').textContent = data.project?.subtitle || '';
            document.getElementById('last-updated').textContent = data.metadata?.updated_at || '-';

            // í•µì‹¬ ì§€í‘œ
            const remaining = data.summary?.remaining_days || 0;
            document.getElementById('d-day').textContent = `D-${remaining}`;
            document.getElementById('overall-progress').textContent = (data.summary?.overall_progress || 0) + '%';
            document.getElementById('progress-bar').style.width = (data.summary?.overall_progress || 0) + '%';
            document.getElementById('budget-rate').textContent = (data.summary?.budget_execution_rate || 0) + '%';
            document.getElementById('budget-bar').style.width = (data.summary?.budget_execution_rate || 0) + '%';
            document.getElementById('risk-count').textContent = (data.summary?.risk_count || 0) + 'ê±´';
            document.getElementById('status-message').textContent = data.summary?.status_message || '-';

            // ì˜ˆì‚° í˜„í™©
            document.getElementById('total-budget').textContent = formatBudget(data.budget?.total || 0);
            document.getElementById('allocated-budget').textContent = formatBudget(data.budget?.allocated || 0);
            document.getElementById('executed-budget').textContent = formatBudget(data.budget?.executed || 0);
            document.getElementById('remaining-budget').textContent = formatBudget(data.budget?.remaining || 0);

            // ë‹¨ìœ„ì‚¬ì—…ë³„ í˜„í™©
            const projectsContainer = document.getElementById('projects-container');
            projectsContainer.innerHTML = '';
            
            if (data.projects && data.projects.length > 0) {
                data.projects.forEach(project => {
                    const progressColor = project.progress >= 80 ? 'bg-green-500' : 
                                         project.progress >= 30 ? 'bg-blue-500' : 
                                         project.progress >= 10 ? 'bg-yellow-500' : 'bg-red-500';
                    
                    projectsContainer.innerHTML += `
                        <div class="flex items-center gap-4">
                            <div class="w-48 flex-shrink-0">
                                <p class="font-medium">${project.name}</p>
                                <p class="text-xs text-gray-400">${formatBudget(project.budget)}</p>
                            </div>
                            <div class="flex-grow">
                                <div class="progress-bar h-6 relative">
                                    <div class="progress-fill ${progressColor}" style="width: ${project.progress}%"></div>
                                    <span class="absolute inset-0 flex items-center justify-center text-xs font-bold">${project.progress}%</span>
                                </div>
                            </div>
                            <div class="w-24 text-right">
                                <span class="status-badge ${getStatusColor(project.status)} text-white">${project.status}</span>
                            </div>
                        </div>
                    `;
                });
            }

            // ì¼ì •
            const timelineContainer = document.getElementById('timeline-container');
            timelineContainer.innerHTML = '';
            
            if (data.timeline && data.timeline.length > 0) {
                data.timeline.slice(0, 6).forEach(item => {
                    const isCompleted = item.status === 'completed';
                    timelineContainer.innerHTML += `
                        <div class="flex items-center gap-3 ${isCompleted ? 'opacity-60' : ''}">
                            <span class="text-lg">${isCompleted ? 'âœ…' : 'ğŸ“Œ'}</span>
                            <div class="flex-grow">
                                <p class="${isCompleted ? 'line-through' : ''}">${item.event}</p>
                            </div>
                            <span class="text-sm text-gray-400">${item.date}</span>
                        </div>
                    `;
                });
            }

            // ë¦¬ìŠ¤í¬
            const risks = data.risks?.summary || {};
            document.getElementById('risk-critical').textContent = risks.critical || 0;
            document.getElementById('risk-high').textContent = risks.high || 0;
            document.getElementById('risk-medium').textContent = risks.medium || 0;
            document.getElementById('risk-low').textContent = risks.low || 0;

            const riskItems = document.getElementById('risk-items');
            riskItems.innerHTML = '';
            
            if (data.risks?.top_items) {
                data.risks.top_items.forEach(item => {
                    const levelColor = item.level === 'critical' ? 'text-red-400' : 'text-orange-400';
                    riskItems.innerHTML += `
                        <div class="flex items-center gap-3">
                            <span class="${levelColor}">â—</span>
                            <p class="flex-grow">${item.title}</p>
                            <span class="text-sm text-gray-400">${item.status}</span>
                        </div>
                    `;
                });
            }

            // ìµœê·¼ ë³€ê²½ì‚¬í•­
            if (data.changes?.latest) {
                const change = data.changes.latest;
                document.getElementById('change-status').textContent = change.status || 'ì™„ë£Œ';
                document.getElementById('change-date').textContent = change.date || '-';
                document.getElementById('change-title').textContent = change.title || '-';
                
                const changeItems = document.getElementById('change-items');
                changeItems.innerHTML = '';
                if (change.items) {
                    change.items.forEach(item => {
                        changeItems.innerHTML += `<li>â€¢ ${item}</li>`;
                    });
                }
            }

            // ë§í¬
            if (data.links) {
                document.getElementById('notion-link').href = data.links.notion || '#';
                document.getElementById('github-link').href = data.links.github || '#';
            }
        }

        // ë°ì´í„° ë¡œë“œ
        async function loadData() {
            try {
                // dashboard.json ë¡œë“œ ì‹œë„
                const response = await fetch('data/dashboard.json');
                
                if (!response.ok) {
                    throw new Error('ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨');
                }
                
                const data = await response.json();
                
                // ë¡œë”© ìˆ¨ê¸°ê³  ëŒ€ì‹œë³´ë“œ í‘œì‹œ
                document.getElementById('loading').classList.add('hidden');
                document.getElementById('dashboard').classList.remove('hidden');
                
                // ëŒ€ì‹œë³´ë“œ ë Œë”ë§
                renderDashboard(data);
                
            } catch (error) {
                console.error('ë°ì´í„° ë¡œë“œ ì˜¤ë¥˜:', error);
                
                // ê¸°ë³¸ ë°ì´í„°ë¡œ í‘œì‹œ
                const defaultData = {
                    project: { name: 'ì•„ì‚°ì‹œ ê°•ì†Œí˜• ìŠ¤ë§ˆíŠ¸ì‹œí‹° êµ¬ì¶•ì‚¬ì—…', subtitle: 'ë°ì´í„° ë¡œë“œ ëŒ€ê¸° ì¤‘...' },
                    summary: { remaining_days: 26, overall_progress: 42.5, budget_execution_rate: 14.8, risk_count: 2, status_message: 'D-26' },
                    budget: { total: 24000000000, allocated: 17134000000, executed: 2530000000, remaining: 14604000000 },
                    projects: [],
                    timeline: [],
                    risks: { summary: { critical: 2, high: 3, medium: 3, low: 0 }, top_items: [] },
                    metadata: { updated_at: new Date().toLocaleString('ko-KR') },
                    links: { notion: '#', github: '#' }
                };
                
                document.getElementById('loading').classList.add('hidden');
                document.getElementById('dashboard').classList.remove('hidden');
                renderDashboard(defaultData);
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì‹¤í–‰
        document.addEventListener('DOMContentLoaded', loadData);
        
        // 5ë¶„ë§ˆë‹¤ ìë™ ìƒˆë¡œê³ ì¹¨
        setInterval(loadData, 5 * 60 * 1000);
    </script>
</body>
</html>
