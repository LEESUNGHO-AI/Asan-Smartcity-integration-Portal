<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì•„ì‚°ì‹œ ìŠ¤ë§ˆíŠ¸ì‹œí‹° í†µí•© ëŒ€ì‹œë³´ë“œ</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #2563eb;
            --success: #22c55e;
            --warning: #f59e0b;
            --danger: #ef4444;
            --info: #06b6d4;
            --dark: #1e293b;
        }
        * { font-family: 'Noto Sans KR', sans-serif; }
        body { background: linear-gradient(135deg, #f0f4f8 0%, #e2e8f0 100%); min-height: 100vh; }
        
        .header {
            background: linear-gradient(135deg, var(--dark) 0%, #334155 100%);
            color: white;
            padding: 1.5rem 2rem;
            margin-bottom: 1.5rem;
        }
        .header h1 { font-weight: 700; font-size: 1.75rem; margin-bottom: 0.25rem; }
        .header .subtitle { opacity: 0.8; font-size: 0.9rem; }
        
        .d-day-box {
            background: linear-gradient(135deg, var(--danger) 0%, #dc2626 100%);
            color: white;
            border-radius: 1rem;
            padding: 1rem 1.5rem;
            text-align: center;
        }
        .d-day-value { font-size: 2.5rem; font-weight: 700; line-height: 1; }
        
        .card {
            border: none;
            border-radius: 1rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            margin-bottom: 1rem;
        }
        .card-header {
            background: transparent;
            border-bottom: 1px solid #e2e8f0;
            font-weight: 600;
            padding: 0.75rem 1rem;
        }
        
        .stat-card {
            text-align: center;
            padding: 1.25rem;
        }
        .stat-value { font-size: 2rem; font-weight: 700; line-height: 1.2; }
        .stat-label { font-size: 0.8rem; color: #64748b; margin-top: 0.25rem; }
        .stat-primary { color: var(--primary); }
        .stat-success { color: var(--success); }
        .stat-warning { color: var(--warning); }
        .stat-danger { color: var(--danger); }
        
        .progress-container {
            background: #e2e8f0;
            border-radius: 0.5rem;
            height: 20px;
            position: relative;
            overflow: hidden;
        }
        .progress-bar-custom {
            background: linear-gradient(90deg, var(--primary), var(--info));
            height: 100%;
            border-radius: 0.5rem;
            transition: width 0.5s ease;
        }
        .progress-text {
            position: absolute;
            right: 6px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 0.7rem;
            font-weight: 600;
            color: #374151;
        }
        
        .badge-status {
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.75rem;
            font-weight: 500;
        }
        .badge-completed { background: #dcfce7; color: #166534; }
        .badge-progress { background: #dbeafe; color: #1e40af; }
        .badge-pending { background: #fef3c7; color: #92400e; }
        .badge-new { background: #e2e8f0; color: #475569; }
        .badge-critical { background: #fee2e2; color: #991b1b; }
        .badge-high { background: #ffedd5; color: #9a3412; }
        .badge-medium { background: #fef9c3; color: #854d0e; }
        
        .table { font-size: 0.85rem; margin-bottom: 0; }
        .table th { background: #f8fafc; font-weight: 600; border-bottom: 2px solid #e2e8f0; }
        
        .sync-info {
            background: #f8fafc;
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            font-size: 0.8rem;
            color: #64748b;
        }
        .notion-link { color: var(--primary); text-decoration: none; }
        .notion-link:hover { text-decoration: underline; }
        
        .loading { text-align: center; padding: 3rem; color: #64748b; }
        
        @media (max-width: 768px) {
            .stat-value { font-size: 1.5rem; }
            .d-day-value { font-size: 1.75rem; }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="container-fluid">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h1>ğŸŒ† <span id="project-name">ì•„ì‚°ì‹œ ìŠ¤ë§ˆíŠ¸ì‹œí‹°</span></h1>
                    <p class="subtitle mb-0" id="project-subtitle">ë””ì§€í„¸ OASIS êµ¬í˜„ì„ í†µí•œ ì§€ì—­ê²½ì œ í™œì„±í™”</p>
                    <small class="opacity-75">
                        ğŸ“Š ë™ê¸°í™”: <span id="last-sync">-</span> | 
                        ğŸ”— <a href="https://www.notion.so/21650aa9577d80dc8278e0187c54677f" class="text-white" target="_blank">Notion ì›ë³¸</a>
                    </small>
                </div>
                <div class="col-md-4 text-end mt-3 mt-md-0">
                    <div class="d-day-box">
                        <small>ì‚¬ì—… ì¢…ë£Œê¹Œì§€</small>
                        <div class="d-day-value">D-<span id="d-day">-</span></div>
                        <small id="extension-info">2026.12.31</small>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="container-fluid px-3 px-md-4">
        <!-- í•µì‹¬ ì§€í‘œ -->
        <div class="row" id="stats-row">
            <div class="col-6 col-md-3">
                <div class="card stat-card">
                    <div class="stat-value stat-primary" id="total-budget">-</div>
                    <div class="stat-label">ì´ ì‚¬ì—…ë¹„</div>
                </div>
            </div>
            <div class="col-6 col-md-3">
                <div class="card stat-card">
                    <div class="stat-value stat-warning" id="execution-rate">-</div>
                    <div class="stat-label">ì˜ˆì‚° ì§‘í–‰ë¥ </div>
                </div>
            </div>
            <div class="col-6 col-md-3">
                <div class="card stat-card">
                    <div class="stat-value stat-success" id="overall-progress">-</div>
                    <div class="stat-label">ì „ì²´ ì§„í–‰ë¥ </div>
                </div>
            </div>
            <div class="col-6 col-md-3">
                <div class="card stat-card">
                    <div class="stat-value stat-danger" id="risk-count">-</div>
                    <div class="stat-label">ê´€ë¦¬ ë¦¬ìŠ¤í¬</div>
                </div>
            </div>
        </div>
        
        <!-- ì˜ˆì‚° & ì§„í–‰ë¥  ì°¨íŠ¸ -->
        <div class="row">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">ğŸ’° ì˜ˆì‚° ì§‘í–‰ í˜„í™©</div>
                    <div class="card-body">
                        <canvas id="budget-chart" height="200"></canvas>
                        <div class="mt-2 small text-muted" id="budget-detail"></div>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">ğŸ“ˆ ë‹¨ìœ„ì‚¬ì—…ë³„ ì§„í–‰ë¥ </div>
                    <div class="card-body">
                        <canvas id="progress-chart" height="200"></canvas>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ë‹¨ìœ„ì‚¬ì—… í˜„í™© -->
        <div class="card">
            <div class="card-header">ğŸ—ï¸ ë‹¨ìœ„ì‚¬ì—…ë³„ ì§„í–‰ í˜„í™© (<span id="project-count">9</span>ê°œ ì‚¬ì—…)</div>
            <div class="card-body p-0">
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th width="40">#</th>
                                <th>ì‚¬ì—…ëª…</th>
                                <th width="90" class="text-end">ì˜ˆì‚°</th>
                                <th width="150">ì§„í–‰ë¥ </th>
                                <th width="100">ìƒíƒœ</th>
                                <th width="120" class="d-none d-md-table-cell">ë‹´ë‹¹ì</th>
                            </tr>
                        </thead>
                        <tbody id="projects-table"></tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <!-- ë¦¬ìŠ¤í¬ í˜„í™© -->
        <div class="card">
            <div class="card-header">âš ï¸ ë¦¬ìŠ¤í¬ ê´€ë¦¬ í˜„í™©</div>
            <div class="card-body p-0">
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th width="70">ë“±ê¸‰</th>
                                <th>ë¦¬ìŠ¤í¬</th>
                                <th class="d-none d-md-table-cell">ëŒ€ì‘ë°©ì•ˆ</th>
                                <th width="100">ë§ˆê°ì¼</th>
                            </tr>
                        </thead>
                        <tbody id="risks-table"></tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <!-- ë°ì´í„° ì†ŒìŠ¤ ì •ë³´ -->
        <div class="sync-info mb-4">
            <div class="row">
                <div class="col-md-6">
                    <strong>ğŸ“Š ë°ì´í„° ì†ŒìŠ¤</strong><br>
                    <a href="https://www.notion.so/21650aa9577d80dc8278e0187c54677f" class="notion-link" target="_blank">
                        Notion: ì•„ì‚°ì‹œ ê°•ì†Œí˜• ìŠ¤ë§ˆíŠ¸ì‹œí‹° êµ¬ì¶•ì‚¬ì—… í”„ë¡œì íŠ¸ ê´€ë¦¬
                    </a>
                </div>
                <div class="col-md-6 text-md-end mt-2 mt-md-0">
                    <strong>ğŸ”„ ë™ê¸°í™” ì •ë³´</strong><br>
                    ë²„ì „: <span id="version">2.1.0</span> | ë°©ì‹: Notion MCP API
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // ëŒ€ì‹œë³´ë“œ ë°ì´í„° (Notionì—ì„œ ë™ê¸°í™”)
        const dashboardData = {
            "project_info": {
                "name": "ì•„ì‚°ì‹œ ê°•ì†Œí˜• ìŠ¤ë§ˆíŠ¸ì‹œí‹° êµ¬ì¶•ì‚¬ì—…",
                "subtitle": "ë””ì§€í„¸ OASIS êµ¬í˜„ì„ í†µí•œ ì§€ì—­ê²½ì œ í™œì„±í™” ë° ë°ì´í„° ê¸°ë°˜ ìŠ¤ë§ˆíŠ¸ì‹œí‹° ì¡°ì„±"
            },
            "budget": {
                "total": 24000000000,
                "allocated": 17130000000,
                "executed": 2530000000,
                "execution_rate": 14.8,
                "remaining": 14600000000
            },
            "progress": {
                "overall": 42.5,
                "total_count": 9
            },
            "unit_projects": [
                {"id": 1, "name": "ìœ ë¬´ì„  ë„¤íŠ¸ì›Œí¬ êµ¬ì¶•", "budget": 800000000, "progress": 96.2, "status": "ê³„ì•½ì™„ë£Œ", "status_code": "completed", "manager": "ì´ì„±í˜¸"},
                {"id": 2, "name": "ì„œë¹„ìŠ¤ ì¸í”„ë¼ í”Œë«í¼", "budget": 2700000000, "progress": 85.0, "status": "í˜‘ìƒì™„ë£Œ", "status_code": "completed", "manager": "ê¹€ì£¼ìš©"},
                {"id": 3, "name": "ì´ë…¸ë² ì´ì…˜ ì„¼í„° êµ¬ì¶•", "budget": 1330000000, "progress": 93.4, "status": "êµ¬ì¶•ì™„ë£Œ", "status_code": "completed", "manager": "ê¹€ì£¼ìš©"},
                {"id": 4, "name": "ë””ì§€í„¸ OASIS SPOT", "budget": 3550000000, "progress": 1.2, "status": "ì‹œìœ ì§€ë³€ê²½", "status_code": "pending", "manager": "ê¹€ì£¼ìš©"},
                {"id": 5, "name": "SDDC Platform", "budget": 2700000000, "progress": 40.0, "status": "ê¸°ìˆ í˜‘ìƒì™„ë£Œ", "status_code": "progress", "manager": "ì´ì„±í˜¸"},
                {"id": 6, "name": "AI í†µí•©ê´€ì œ í”Œë«í¼", "budget": 1600000000, "progress": 30.0, "status": "ê°œë°œì¤‘", "status_code": "progress", "manager": "ê¹€ì£¼ìš©"},
                {"id": 7, "name": "ë””ì§€í„¸ OASIS ì •ë³´ê´€ë¦¬", "budget": 2300000000, "progress": 15.0, "status": "ì—…ì²´ì„ ì •ì¤‘", "status_code": "progress", "manager": "í•¨ì •ì˜"},
                {"id": 8, "name": "DRT í”Œë«í¼", "budget": 1000000000, "progress": 5.0, "status": "ê°œë°œì¤‘", "status_code": "progress", "manager": "PMOíŒ€"},
                {"id": 9, "name": "ê°ë¦¬ìš©ì—­", "budget": 160000000, "progress": 0, "status": "ì‹ ì„¤", "status_code": "new", "manager": "ê¹€ì£¼ìš©"}
            ],
            "risks": [
                {"level": "critical", "title": "ì˜ˆì‚° ì§‘í–‰ë¥  ì €ì¡° (14.8%)", "mitigation": "2026ë…„ ìƒë°˜ê¸° ëŒ€í˜• ê³„ì•½ ì²´ê²°", "deadline": "2026-06-30"},
                {"level": "critical", "title": "OASIS SPOT ê³µì‚¬ ì§€ì—°", "mitigation": "2026ë…„ 1ë¶„ê¸° ê³µì‚¬ ì°©ìˆ˜", "deadline": "2026-03-31"},
                {"level": "high", "title": "SDDC Platform ê³„ì•½ ì§€ì—°", "mitigation": "ê³„ì•½ ì²´ê²° ì™„ë£Œ", "deadline": "2025-12-05"},
                {"level": "high", "title": "ì„œë¹„ìŠ¤ ì¸í”„ë¼ ê³„ì•½ ì§€ì—°", "mitigation": "ê³„ì•½ ì²´ê²° ì™„ë£Œ", "deadline": "2025-12-05"},
                {"level": "high", "title": "ë„¤íŠ¸ì›Œí¬ ì¥ë¹„ ë‚©ê¸° ì§€ì—°", "mitigation": "ì¡°ê¸° ë°œì£¼", "deadline": "2026-02-28"},
                {"level": "medium", "title": "AIí†µí•©ê´€ì œ ê³„ì•½ ì§€ì—°", "mitigation": "12/10 ê³„ì•½ ëª©í‘œ", "deadline": "2025-12-10"},
                {"level": "medium", "title": "ì •ë³´ê´€ë¦¬ ì—…ì²´ì„ ì • ì§€ì—°", "mitigation": "12/8 ì„ ì •", "deadline": "2025-12-08"},
                {"level": "medium", "title": "DRT ì°¨ëŸ‰ ë°œì£¼ ì§€ì—°", "mitigation": "12ì›” ë‚´ ë°œì£¼", "deadline": "2025-12-31"}
            ],
            "risk_summary": {"critical": 2, "high": 3, "medium": 3, "total": 8},
            "d_day": {"project_end": 359, "extension_approved": true},
            "last_updated": "2026-01-06T12:00:00+09:00",
            "version": "2.1.0"
        };
        
        // ê¸ˆì•¡ í¬ë§·
        function formatCurrency(amount) {
            if (amount >= 100000000) return (amount / 100000000).toFixed(1) + 'ì–µì›';
            if (amount >= 10000) return (amount / 10000).toFixed(0) + 'ë§Œì›';
            return amount.toLocaleString() + 'ì›';
        }
        
        // ìƒíƒœ ë°°ì§€
        function getStatusBadge(statusCode, status) {
            const badges = {
                'completed': 'badge-completed',
                'progress': 'badge-progress',
                'pending': 'badge-pending',
                'new': 'badge-new'
            };
            return `<span class="badge-status ${badges[statusCode] || 'badge-progress'}">${status}</span>`;
        }
        
        // ë¦¬ìŠ¤í¬ ë°°ì§€
        function getRiskBadge(level) {
            const badges = {
                'critical': ['ğŸ”´ ê¸´ê¸‰', 'badge-critical'],
                'high': ['ğŸŸ  ë†’ìŒ', 'badge-high'],
                'medium': ['ğŸŸ¡ ì£¼ì˜', 'badge-medium']
            };
            const [text, cls] = badges[level] || ['âšª', ''];
            return `<span class="badge-status ${cls}">${text}</span>`;
        }
        
        // ëŒ€ì‹œë³´ë“œ ë Œë”ë§
        function renderDashboard() {
            const data = dashboardData;
            
            // í—¤ë”
            document.getElementById('project-name').textContent = data.project_info.name;
            document.getElementById('project-subtitle').textContent = data.project_info.subtitle;
            document.getElementById('last-sync').textContent = new Date(data.last_updated).toLocaleString('ko-KR');
            document.getElementById('d-day').textContent = data.d_day.project_end;
            document.getElementById('extension-info').textContent = data.d_day.extension_approved ? '2026.12.31 (ì—°ì¥ìŠ¹ì¸)' : '2026.12.31';
            
            // í•µì‹¬ ì§€í‘œ
            document.getElementById('total-budget').textContent = formatCurrency(data.budget.total);
            document.getElementById('execution-rate').textContent = data.budget.execution_rate + '%';
            document.getElementById('overall-progress').textContent = data.progress.overall + '%';
            document.getElementById('risk-count').textContent = data.risk_summary.total + 'ê±´';
            document.getElementById('project-count').textContent = data.progress.total_count;
            document.getElementById('version').textContent = data.version;
            
            // ì˜ˆì‚° ìƒì„¸
            document.getElementById('budget-detail').innerHTML = 
                `ë°°ì •: ${formatCurrency(data.budget.allocated)} | ì§‘í–‰: ${formatCurrency(data.budget.executed)} | ì”ì•¡: ${formatCurrency(data.budget.remaining)}`;
            
            // ë‹¨ìœ„ì‚¬ì—… í…Œì´ë¸”
            const projectsHtml = data.unit_projects.map(p => `
                <tr>
                    <td>${p.id}</td>
                    <td><strong>${p.name}</strong></td>
                    <td class="text-end">${formatCurrency(p.budget)}</td>
                    <td>
                        <div class="progress-container">
                            <div class="progress-bar-custom" style="width: ${p.progress}%"></div>
                            <span class="progress-text">${p.progress}%</span>
                        </div>
                    </td>
                    <td>${getStatusBadge(p.status_code, p.status)}</td>
                    <td class="d-none d-md-table-cell">${p.manager}</td>
                </tr>
            `).join('');
            document.getElementById('projects-table').innerHTML = projectsHtml;
            
            // ë¦¬ìŠ¤í¬ í…Œì´ë¸”
            const risksHtml = data.risks.map(r => `
                <tr>
                    <td>${getRiskBadge(r.level)}</td>
                    <td><strong>${r.title}</strong></td>
                    <td class="d-none d-md-table-cell">${r.mitigation}</td>
                    <td>${r.deadline}</td>
                </tr>
            `).join('');
            document.getElementById('risks-table').innerHTML = risksHtml;
            
            // ì°¨íŠ¸ ë Œë”ë§
            renderCharts(data);
        }
        
        // ì°¨íŠ¸ ë Œë”ë§
        function renderCharts(data) {
            // ì˜ˆì‚° ì°¨íŠ¸
            new Chart(document.getElementById('budget-chart'), {
                type: 'doughnut',
                data: {
                    labels: ['ì§‘í–‰', 'ê³„ì•½ì¤‘', 'ë¯¸ë°°ì •'],
                    datasets: [{
                        data: [
                            data.budget.executed,
                            data.budget.allocated - data.budget.executed,
                            data.budget.total - data.budget.allocated
                        ],
                        backgroundColor: ['#22c55e', '#f59e0b', '#e2e8f0'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'bottom' }
                    }
                }
            });
            
            // ì§„í–‰ë¥  ì°¨íŠ¸
            new Chart(document.getElementById('progress-chart'), {
                type: 'bar',
                data: {
                    labels: data.unit_projects.map(p => p.name.substring(0, 8)),
                    datasets: [{
                        label: 'ì§„í–‰ë¥  (%)',
                        data: data.unit_projects.map(p => p.progress),
                        backgroundColor: data.unit_projects.map(p => 
                            p.progress >= 80 ? '#22c55e' : 
                            p.progress >= 30 ? '#f59e0b' : '#ef4444'
                        ),
                        borderRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    scales: {
                        x: { max: 100 }
                    },
                    plugins: {
                        legend: { display: false }
                    }
                }
            });
        }
        
        // ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', renderDashboard);
    </script>
</body>
</html>
